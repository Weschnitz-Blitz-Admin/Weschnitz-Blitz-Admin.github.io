<!DOCTYPE html>
<html lang="de">
<head>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weschnitz-Blitz</title>
    <meta name="description" content="Der Weschnitz-Blitz ist ein regionales Magazin, das sich dem kulturellen Leben des Weschnitztals widmet. Kontakt: info@weschnitz-blitz.de">
    <script defer src="https://cloud.umami.is/script.js" data-website-id="4d0dface-7992-4a78-81e8-9d9c948afc80"></script>

    <style>
/* Allgemeine Stile */
body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Stil für das Bild in der oberen Mitte */
.company-image {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    height: auto;
    width: 100%;
    opacity: 0.92;
    transition: opacity 10s ease-in-out;
    z-index: 10;
}

/* Hintergrundcontainer */
.background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    z-index: -1;
}

/* Bildstil mit Zoom-Effekt */
.background img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transform: scale(1);
    transition: opacity 3s ease-in-out, transform 18s ease-in-out;
}

/* Sichtbares Bild */
.background img.active {
    opacity: 1;
    transform: scale(1.1);
}

/* Fußzeile */
footer {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
}

footer nav {
    display: inline-block;
}

footer nav a {
    margin: 5px 8px;
    text-decoration: none;
    background-color: rgba(107, 132, 196, 0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 20px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    display: inline-block;
    white-space: nowrap;
}

footer nav a:hover {
    background-color: rgba(107, 132, 196, 1);
}
    </style>
</head>

<body>
    <img src="Header.png" class="company-image" id="company-image" alt="Weschnitz-Blitz">
    <div class="background"></div>

    <footer>
        <nav>
            <a href="Konzept.html">Unser Konzept</a>
            <a href="Magazin.html">Aktuelles Magazin</a>
            <a href="Archiv.html">Archiv</a>
            <a href="Kontakt.html">Kontakt</a>
            <a href="Anzeigenangebot.html">Anzeigenangebot</a>
            <a href="Auslagestellen.html">Auslagestellen</a>
            <a href="Team.html">Unser Team</a>
            <a href="Impressum.html">Impressum</a>
        </nav>
    </footer>

    <script>
    const imageSources = [
        "Webbilder-1.webp","Webbilder-2.webp","Webbilder-3.webp","Webbilder-4.webp","Webbilder-5.webp",
        "Webbilder-6.webp","Webbilder-7.webp","Webbilder-8.webp","Webbilder-9.webp","Webbilder-10.webp",
        "Webbilder-11.webp","Webbilder-12.webp","Webbilder-13.webp","Webbilder-14.webp","Webbilder-15.webp",
        "Webbilder-16.webp","Webbilder-17.webp","Webbilder-18.webp","Webbilder-19.webp","Webbilder-20.webp",
        "Webbilder-21.webp","Webbilder-22.webp","Webbilder-23.webp","Webbilder-24.webp","Webbilder-25.webp",
        "Webbilder-26.webp","Webbilder-27.webp","Webbilder-28.webp","Webbilder-29.webp","Webbilder-30.webp",
        "Webbilder-31.webp","Webbilder-32.webp","Webbilder-33.webp","Webbilder-34.webp"
    ];

    // Randomize the order once per page load
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    const shuffledSources = shuffle([...imageSources]);
    const background = document.querySelector('.background');
    let currentIndex = 0;
    let preloadedImages = [];

    // Show first image immediately
    const firstImg = new Image();
    firstImg.src = shuffledSources[currentIndex];
    firstImg.classList.add('active');
    firstImg.onload = () => background.appendChild(firstImg);
    preloadedImages.push(firstImg);

    // Progressive preloader – loads one image at a time in display order
    function preloadSequentially(index) {
        if (index >= shuffledSources.length) return;
        const img = new Image();
        img.src = shuffledSources[index];
        preloadedImages[index] = img;
        img.onload = () => {
            // Once loaded, start loading the next one
            preloadSequentially(index + 1);
        };
    }

    // Start preloading starting from the 2nd image
    preloadSequentially(1);

    function changeImage() {
        const nextIndex = (currentIndex + 1) % shuffledSources.length;
        const nextImg = preloadedImages[nextIndex];

        // If for some reason it's not ready, skip until loaded
        if (!nextImg || !nextImg.complete) {
            // Try again in a short moment
            setTimeout(changeImage, 1000);
            return;
        }

        background.appendChild(nextImg);

        setTimeout(() => {
            preloadedImages[currentIndex].classList.remove('active');
            nextImg.classList.add('active');
        }, 50);

        setTimeout(() => {
            background.removeChild(preloadedImages[currentIndex]);
            currentIndex = nextIndex;
        }, 3000);
    }

    const initialDisplayTime = 6000;
    const displayTime = 14500;

    setTimeout(() => {
        changeImage();
        setInterval(changeImage, displayTime);
    }, initialDisplayTime);

    // Fade out header after 30s
    window.addEventListener('load', () => {
        setTimeout(() => {
            const companyImage = document.getElementById('company-image');
            companyImage.style.transition = 'opacity 10s ease-out';
            companyImage.style.opacity = '0';
        }, 30000);
    });

    // Redirect mobile users
    if (window.innerWidth <= 768) {
        window.location.href = "Magazin.html";
    }
    </script>
</body>
</html>

